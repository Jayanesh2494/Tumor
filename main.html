<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brain Tumor Detection System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #f5f5dc; /* Beige background */
    min-height: 100vh;
    color: #333;
}


        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        /* Login Page Styles */
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        .login-card {
    background-color: #ffffff !important; /* Force pure white */
    padding: 40px;
    border-radius: 20px;
    box-shadow: 0 20px 40px rgba(0,0,0,0.2);
    width: 100%;
    max-width: 400px;
    text-align: center;
}



        .logo {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .login-title {
            font-size: 2em;
            color: #4a5568;
            margin-bottom: 30px;
        }

        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            color: #4a5568;
            font-weight: 500;
        }

        .form-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .form-input:focus {
    border-color: #d2b48c; /* Beige tone */
}


        .login-btn {
    width: 100%;
    padding: 15px;
    background: linear-gradient(135deg, #d2b48c 0%, #8b7355 100%); /* Beige & brown */
    color: white;
    border: none;
    border-radius: 10px;
    font-size: 18px;
    cursor: pointer;
    transition: transform 0.3s ease;
}


        .login-btn:hover {
            transform: translateY(-2px);
        }

        /* Dashboard Styles */
        .dashboard {
            min-height: 100vh;
            background: #f7fafc;
        }

        .navbar {
            background: white;
            padding: 15px 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-logo {
            font-size: 1.5em;
            font-weight: bold;
            color: #8b7355;
        }

        .nav-user {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logout-btn {
            padding: 8px 16px;
            background: #e53e3e;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
        }

        .dashboard-container {
            padding: 30px;
            max-width: 1400px;
            margin: 0 auto;
        }
.welcome-section {
    background: #8b7355;  /* beige-brown theme background */
    color: #ffffff;       /* white text */
    padding: 40px;
    border-radius: 20px;
    margin-bottom: 30px;
    text-align: center;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15); /* subtle shadow */
}

        .welcome-title {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            text-align: center;
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-icon {
            font-size: 3em;
            margin-bottom: 15px;
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #718096;
            font-size: 1.1em;
        }

        .actions-section {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            text-align: center;
        }

        .predict-btn {
    background: #8b7355;       /* theme color */
    color: #ffffff;            /* white text */
    border: none;
    padding: 14px 24px;
    margin: 8px;
    border-radius: 12px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 10px rgba(0,0,0,0.15);
}

.predict-btn:hover {
    background: #a0896c;       /* lighter shade of theme */
    transform: translateY(-3px);
    box-shadow: 0 6px 14px rgba(0,0,0,0.25);
}


        /* Prediction Page Styles */
        .prediction-page {
            min-height: 100vh;
            background: #f7fafc;
        }

        .prediction-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px;
        }

        .page-header {
            background: white;
            padding: 20px 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .back-btn {
            background: #d2b48c;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            margin-right: 15px;
        }

        .prediction-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        .upload-section, .results-section {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .section-title {
            font-size: 1.5em;
            margin-bottom: 20px;
            color: #4a5568;
            border-bottom: 3px solid #d2b48c;
            padding-bottom: 10px;
        }

        .upload-area {
            border: 3px dashed #cbd5e0;
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .upload-area:hover {
            border-color: #d2b48c;
            background: rgba(210, 180, 140, 0.1);
        }

        .upload-icon {
            font-size: 4em;
            color: #a0aec0;
            margin-bottom: 20px;
        }

        .upload-text {
            color: #718096;
            font-size: 1.1em;
            margin-bottom: 20px;
        }

        .file-input {
            display: none;
        }

        .upload-btn {
            background: linear-gradient(135deg, #f5f5dc 0%, #d2b48c 100%); /* beige gradient */
            color: #8b7355; 
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1em;
        }

        .image-preview {
            width: 100%;
            max-width: 300px;
            height: 200px;
            object-fit: cover;
            border-radius: 10px;
            margin: 20px auto;
            display: block;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .analyze-btn {
  background: linear-gradient(135deg, #d2b48c 0%, #b08b62 100%); /* beige gradient */
  color: #fff;
  border: none;
  padding: 15px 40px;
  border-radius: 10px;
  cursor: pointer;
  font-size: 1.1em;
  width: 100%;
  margin-top: 20px;
  font-weight: 600;
  transition: all 0.3s ease;
}

.analyze-btn:hover {
  background: linear-gradient(135deg, #b08b62 0%, #8b5e3c 100%); /* darker beige hover */
}


        .loading {
            display: none;
            text-align: center;
            margin: 30px 0;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #d2b48c;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .results {
            display: none;
        }

        .result-header {
            background: linear-gradient(135deg, #f5f5dc 0%, #d2b48c 100%);
            color: #8b7355;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
        }

        .result-header.normal {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        .result-status {
            font-size: 1.8em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .confidence-score {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .gradcam-section {
            margin: 20px 0;
        }

        .gradcam-title {
            font-size: 1.2em;
            color: #4a5568;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .gradcam-container {
            position: relative;
            display: inline-block;
        }

        .gradcam-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 60% 40%, rgba(255, 0, 0, 0.6) 15%, transparent 40%);
            border-radius: 10px;
            pointer-events: none;
        }

        .ai-explanation {
            background: #f7fafc;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #d2b48c;
            margin-top: 20px;
        }

        .explanation-title {
            font-size: 1.2em;
            color: #2d3748;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .tumor-type {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            font-weight: bold;
            color: #8b4513;
        }

        .explanation-text {
            line-height: 1.6;
            color: #4a5568;
        }

        .details-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }

        .detail-item {
            background: #f7fafc;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .detail-label {
            font-size: 0.9em;
            color: #718096;
            margin-bottom: 5px;
        }

        .detail-value {
            font-size: 1.2em;
            font-weight: bold;
            color: #2d3748;
        }

        @media (max-width: 768px) {
            .prediction-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .details-grid {
                grid-template-columns: 1fr;
            }
            
            .dashboard-container, .prediction-container {
                padding: 15px;
            }
        }
        /* Reports Page Layout */
.reports-container {
  padding: 20px;
}

.page-header {
  display: flex;
  align-items: center;
  gap: 15px;
  margin-bottom: 20px;
}

.page-title {
  font-size: 1.5em;
  font-weight: bold;
}


/* Filters */
.report-filters {
  display: flex;
  justify-content: space-between;
  margin-bottom: 15px;
}

.search-bar {
  padding: 8px 12px;
  border-radius: 8px;
  border: 1px solid #ccc;
  width: 60%;
}

.filter-dropdown {
  padding: 8px 12px;
  border-radius: 8px;
  border: 1px solid #ccc;
}

/* Table */
.reports-table-wrapper {
  overflow-x: auto;
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  background: #fff;
}

.reports-table {
  width: 100%;
  border-collapse: collapse;
}

.reports-table th, 
.reports-table td {
  padding: 14px;
  text-align: left;
  border-bottom: 1px solid #eee;
}

.reports-table th {
  background: #fafafa;
  font-weight: bold;
}

/* Badges */
.result-badge {
  padding: 5px 10px;
  border-radius: 12px;
  font-size: 0.85em;
  font-weight: bold;
}

.result-badge.danger {
  background: #ffe5e5;
  color: #d63031;
}

.result-badge.safe {
  background: #e5ffe5;
  color: #27ae60;
}

.status {
  padding: 4px 10px;
  border-radius: 10px;
  font-size: 0.8em;
}

.status.reviewed {
  background: #e8f5ff;
  color: #2980b9;
}

.status.pending {
  background: #fff5e5;
  color: #e67e22;
}

/* Buttons */
.view-btn, .download-btn {
  border: none;
  padding: 6px 12px;
  margin-right: 6px;
  border-radius: 8px;
  cursor: pointer;
  font-size: 0.85em;
}

.view-btn {
  background: #3498db;
  color: white;
}

.view-btn:hover {
  background: #2980b9;
}

.download-btn {
  background: #2ecc71;
  color: white;
}

.download-btn:hover {
  background: #27ae60;
}
/* Modal Overlay */
.modal {
  display: none; 
  position: fixed;
  z-index: 1000; 
  padding-top: 80px;
  left: 0; top: 0;
  width: 100%; height: 100%;
  overflow: auto;
  background-color: rgba(0,0,0,0.6);
}

/* Modal Box */
.modal-content {
  background: #fff;
  margin: auto;
  padding: 20px;
  border-radius: 12px;
  width: 70%;
  max-width: 900px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  animation: slideDown 0.3s ease;
}

@keyframes slideDown {
  from { transform: translateY(-30px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

/* Close Button */
.close-btn {
  float: right;
  font-size: 28px;
  font-weight: bold;
  cursor: pointer;
  color: #666;
}

.close-btn:hover {
  color: #000;
}

/* Modal Content Layout */
.modal-details {
  display: flex;
  gap: 20px;
  margin: 20px 0;
}

.modal-info {
  flex: 1;
  font-size: 1.1em;
}

.modal-image {
  flex: 1;
  text-align: center;
}

.modal-image img {
  max-width: 100%;
  border-radius: 12px;
  border: 2px solid #eee;
}

/* Doctor Notes */
.doctor-notes textarea {
  width: 100%;
  height: 100px;
  border-radius: 8px;
  border: 1px solid #ccc;
  padding: 10px;
  margin-top: 8px;
  font-size: 1em;
}

/* Modal Footer */
.modal-actions {
  display: flex;
  justify-content: flex-end;
  gap: 12px;
  margin-top: 15px;
}

.close-btn2 {
  background: #f4f4f4;
  border: none;
  padding: 8px 14px;
  border-radius: 8px;
  cursor: pointer;
}

.close-btn2:hover {
  background: #ddd;
}


    </style>
</head>
<body>
    <!-- Login Page -->
    <div id="loginPage" class="page active">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
        <div class="login-container">
            <div class="login-card">
                <div class="logo">🧠</div>
                <h1 class="login-title">NeuroDetect</h1>
                <p style="color: #718096; margin-bottom: 30px;">Advanced Brain Tumor Detection System</p>
                
                <form id="loginForm">
                    <div class="form-group">
                        <label class="form-label" for="username">Username</label>
                        <input type="text" id="username" class="form-input" placeholder="Enter your username" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="password">Password</label>
                        <input type="password" id="password" class="form-input" placeholder="Enter your password" required>
                    </div>
                    
                    <button type="submit" class="login-btn">Login</button>
                </form>
            
            </div>
        </div>
    </div>

    <!-- Dashboard Page -->
    <div id="dashboardPage" class="page">
        <div class="dashboard">
            <nav class="navbar">
                <div class="nav-logo">🧠 NeuroDetect</div>
                <div class="nav-user">
                    <span>Welcome, <strong id="userDisplayName">Doctor</strong></span>
                    <button class="logout-btn" onclick="logout()">Logout</button>
                </div>
            </nav>
            
            <div class="dashboard-container">
                <div class="welcome-section">
                    <h1 class="welcome-title">Brain Tumor Detection Dashboard</h1>
                    <p>Advanced AI-powered medical imaging analysis for early tumor detection</p>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">📊</div>
                        <div class="stat-number">15</div>
                        <div class="stat-label">Total Scans Analyzed</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">🎯</div>
                        <div class="stat-number">94.2%</div>
                        <div class="stat-label">Accuracy Rate</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">⚡</div>
                        <div class="stat-number">2.1s</div>
                        <div class="stat-label">Average Processing Time</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">🔍</div>
                        <div class="stat-number">4</div>
                        <div class="stat-label">Early Detections</div>
                    </div>
                </div>

                <div class="actions-section">
                    <h2 style="margin-bottom: 20px; color: #4a5568;">Quick Actions</h2>
                    <button class="predict-btn" onclick="goToPrediction()">
                        🔍 New Brain Scan Analysis
                    </button>
                    <button class="predict-btn" onclick="goToReports()">
                        📈 View Reports
                    </button>
                </div>

                </div>
            </div>
        </div>
    </div>

    <!-- Prediction Page -->
    <div id="predictionPage" class="page">
        <div class="prediction-page">
            <nav class="navbar">
                <div class="nav-logo">🧠 NeuroDetect</div>
                <div class="nav-user">
                    <span>Welcome, <strong>Doctor</strong></span>
                    <button class="logout-btn" onclick="logout()">Logout</button>
                </div>
            </nav>
            
            <div class="prediction-container">
                <div class="page-header">
                    <button class="back-btn" onclick="goToDashboard() ">← Back to Dashboard</button>
                    <span style="font-size: 1.3em; font-weight: bold;">Brain Scan Analysis</span>
                </div>
                
                <div class="prediction-grid">
                    <div class="upload-section">
                        <h2 class="section-title">📤 Upload Brain Scan</h2>
                        
                        <div class="upload-area" id="uploadArea">
                            <div class="upload-icon">🖼️</div>
                            <div class="upload-text">Drag and drop your brain scan image here</div>
                            <div class="upload-text">or click to browse</div>
                            <input type="file" id="fileInput" class="file-input" accept="image/*">
                            <button class="upload-btn" onclick="document.getElementById('fileInput').click()">
                                Choose File
                            </button>
                        </div>
                        
                        <div id="imageContainer" style="display: none; text-align: center;">
                            <img id="uploadedImage" class="image-preview" alt="Uploaded brain scan">
                            <button class="analyze-btn" onclick="analyzeImage()">
                                🔍 Analyze with AI
                            </button>
                        </div>
                        
                        <div class="loading" id="loadingSection">
                            <div class="spinner"></div>
                            <p><strong>Analyzing brain scan...</strong></p>
                            <p id="loadingStep">Initializing AI model...</p>
                        </div>
                    </div>
                    
                    <div class="results-section">
                        <h2 class="section-title">📊 Analysis Results</h2>
                        
                        <div id="noResults" style="text-align: center; color: #718096; padding: 40px;">
                            <div style="font-size: 4em; margin-bottom: 20px;">🔬</div>
                            <p>Upload a brain scan to see AI analysis results</p>
                        </div>
                        
                        <div class="results" id="analysisResults">
                            <div class="result-header" id="resultHeader">
                                <div class="result-status" id="resultStatus"></div>
                                <div class="confidence-score" id="confidenceScore"></div>
                            </div>
                            
                            <div class="gradcam-section">
                                <div class="gradcam-title">🎯 Grad-CAM Visualization</div>
                                <div class="gradcam-container">
                                    <img id="gradcamImage" class="image-preview" alt="Grad-CAM visualization">
                                    <div class="gradcam-overlay" id="gradcamOverlay"></div>
                                </div>
                                <p style="font-size: 0.9em; color: #718096; margin-top: 10px;">
                                    Red regions indicate areas of high model attention
                                </p>
                            </div>
                            
                            <div class="ai-explanation">
                                <div class="explanation-title">🤖 AI Explanation</div>
                                <div class="tumor-type" id="tumorType"></div>
                                <div class="explanation-text" id="explanationText"></div>
                            </div>
                            
                            <div class="details-grid">
                                <div class="detail-item">
                                    <div class="detail-label">Processing Time</div>
                                    <div class="detail-value" id="processingTime">3.2s</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-label">Model Version</div>
                                    <div class="detail-value">CNN-v3.1</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-label">Image Quality</div>
                                    <div class="detail-value" id="imageQuality">Excellent</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-label">Scan Type</div>
                                    <div class="detail-value" id="scanType">MRI</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

<!-- Reports Page -->
<div id="reportsPage" class="page" style="display:none;">
  <div class="reports-page">
    <!-- Navbar -->
    <nav class="navbar">
      <div class="nav-logo">🧠 NeuroDetect</div>
      <div class="nav-user">
        <span>Welcome, <strong>Doctor</strong></span>
        <button class="logout-btn" onclick="logout()">Logout</button>
      </div>
    </nav>

    <!-- Reports Container -->
    <div class="reports-container">
      <!-- Page Header -->
      <div class="page-header">
        <button class="back-btn" onclick="goToDashboard()">← Back to Dashboard</button>
        <span class="page-title">📑 Patient Reports</span>
      </div>

      <!-- Search & Filter -->
      <div class="report-filters">
        <input type="text" placeholder="🔍 Search by Patient ID or Name" class="search-bar">
        <select class="filter-dropdown">
          <option value="all">All Results</option>
          <option value="tumor">Tumor Detected</option>
          <option value="no-tumor">No Tumor</option>
        </select>
      </div>

      <!-- Reports Table -->
      <div class="reports-table-wrapper">
        <table class="reports-table">
          <thead>
            <tr>
              <th>Patient ID</th>
              <!-- Add this TH after Patient ID -->
              <th>Patient Name</th>
              <th>Scan Date</th>
              <th>Result</th>
              <th>Confidence</th>
              <th>Status</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
  <tr>
    <td>P001</td>
    <td>John Doe</td> <!-- NEW -->
    <td>2025-08-20</td>
    <td><span class="result-badge danger">Tumor Detected</span></td>
    <td>95%</td>
    <td><span class="status reviewed">Reviewed</span></td>
    <td>
      <button class="view-btn"
        onclick="openReport('P001','John Doe','Tumor Detected','95%','/images/sample1.jpg')">View</button>
      <button class="download-btn">⬇ PDF</button>
    </td>
  </tr>

  <tr>
    <td>P002</td>
    <td>Aisha Sharma</td> <!-- NEW -->
    <td>2025-08-21</td>
    <td><span class="result-badge safe">No Tumor</span></td>
    <td>89%</td>
    <td><span class="status pending">Pending</span></td>
    <td>
      <button class="view-btn"
        onclick="openReport('P002','Aisha Sharma','No Tumor','89%','/images/sample2.jpg')">View</button>
      <button class="download-btn">⬇ PDF</button>
    </td>
  </tr>
</tbody>

        </table>
      </div>
    </div>
  </div>
</div>

<!-- Modal Popup -->
<div id="reportModal" class="modal">
  <div class="modal-content">
    <span class="close-btn" onclick="closeReport()">&times;</span>
    
    <h2>📝 Patient Report</h2>
    <div class="modal-details">
      <div class="modal-info">
        <p><strong>Patient ID:</strong> <span id="modalPatientId"></span></p>
        <p><strong>Name:</strong> <span id="modalPatientName"></span></p>
        <p><strong>AI Result:</strong> <span id="modalResult"></span></p>
        <p><strong>Confidence:</strong> <span id="modalConfidence"></span></p>
      </div>
      <div class="modal-image">
        <img id="modalScanImage" src="" alt="Brain Scan">
      </div>
    </div>

    <div class="doctor-notes">
      <label for="notes"><strong>Doctor's Notes:</strong></label>
      <textarea id="notes" placeholder="Enter observations..."></textarea>
    </div>

    <div class="modal-actions">
      <button class="download-btn">⬇ Save as PDF</button>
      <button class="close-btn2" onclick="closeReport()">Close</button>
    </div>
  </div>
</div>




    <script>
        // Application state
        let currentUser = null;
        let currentPage = 'loginPage';

        // Tumor types and explanations
        const tumorData = {
            glioma: {
                name: "Glioma Detected",
                explanation: "Gliomas are tumors that arise from glial cells in the brain and spinal cord. The AI detected characteristic irregular boundaries and heterogeneous signal intensities typical of glial cell proliferation, indicating potential malignant transformation requiring immediate medical attention."
            },
            meningioma: {
                name: "Meningioma Detected", 
                explanation: "Meningiomas originate from the meninges surrounding the brain and are typically benign slow-growing tumors. The AI identified the characteristic well-defined borders and homogeneous enhancement pattern, suggesting a tumor arising from the protective membrane layers of the brain."
            },
            pituitary: {
                name: "Pituitary Adenoma Detected",
                explanation: "Pituitary adenomas are typically benign tumors of the pituitary gland that can affect hormone production. The AI detected an abnormal mass in the sella turcica region with characteristic enhancement patterns, potentially disrupting normal pituitary hormone regulation."
            },
            normal: {
                name: "No Tumor Detected",
                explanation: "The brain scan appears normal with no detectable tumor masses or suspicious lesions. The AI analysis shows healthy brain tissue architecture with normal signal intensities, symmetrical structures, and no evidence of abnormal cell growth or space-occupying lesions."
            }
        };

        // Login functionality
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            if (username && password) {
                currentUser = username;
                document.getElementById('userDisplayName').textContent = username;
                showPage('dashboardPage');
            }
        });

        // File upload handling
        const fileInput = document.getElementById('fileInput');
        const uploadArea = document.getElementById('uploadArea');
        const imageContainer = document.getElementById('imageContainer');
        const uploadedImage = document.getElementById('uploadedImage');

        // Drag and drop
        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.style.borderColor = '#667eea';
            uploadArea.style.backgroundColor = 'rgba(102, 126, 234, 0.1)';
        });

        uploadArea.addEventListener('dragleave', () => {
            uploadArea.style.borderColor = '#cbd5e0';
            uploadArea.style.backgroundColor = 'transparent';
        });

        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.style.borderColor = '#cbd5e0';
            uploadArea.style.backgroundColor = 'transparent';
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                handleFileUpload(files[0]);
            }
        });

        fileInput.addEventListener('change', (e) => {
            if (e.target.files.length > 0) {
                handleFileUpload(e.target.files[0]);
            }
        });

        function handleFileUpload(file) {
            if (!file.type.startsWith('image/')) {
                alert('Please select an image file');
                return;
            }

            const reader = new FileReader();
            reader.onload = (e) => {
                uploadedImage.src = e.target.result;
                uploadArea.style.display = 'none';
                imageContainer.style.display = 'block';
                document.getElementById('noResults').style.display = 'block';
                document.getElementById('analysisResults').style.display = 'none';
            };
            reader.readAsDataURL(file);
        }

        function analyzeImage() {
            const loadingSection = document.getElementById('loadingSection');
            const loadingStep = document.getElementById('loadingStep');
            const noResults = document.getElementById('noResults');
            const analysisResults = document.getElementById('analysisResults');
            
            loadingSection.style.display = 'block';
            noResults.style.display = 'none';
            analysisResults.style.display = 'none';

            const steps = [
                'Initializing AI model...',
                'Preprocessing image data...',
                'Running convolutional layers...',
                'Extracting feature maps...',
                'Generating Grad-CAM visualization...',
                'Analyzing tumor characteristics...',
                'Finalizing results...'
            ];

            let stepIndex = 0;
            const stepInterval = setInterval(() => {
                if (stepIndex < steps.length) {
                    loadingStep.textContent = steps[stepIndex];
                    stepIndex++;
                } else {
                    clearInterval(stepInterval);
                    setTimeout(() => {
                        displayResults();
                        loadingSection.style.display = 'none';
                        analysisResults.style.display = 'block';
                    }, 1000);
                }
            }, 800);
        }

        function displayResults() {
            // Simulate random results
            const tumorTypes = ['glioma', 'meningioma', 'pituitary', 'normal'];
            const randomType = tumorTypes[Math.floor(Math.random() * tumorTypes.length)];
            const confidence = Math.random() * 20 + 80; // 80-100%
            
            const resultHeader = document.getElementById('resultHeader');
            const resultStatus = document.getElementById('resultStatus');
            const confidenceScore = document.getElementById('confidenceScore');
            const tumorType = document.getElementById('tumorType');
            const explanationText = document.getElementById('explanationText');
            const gradcamImage = document.getElementById('gradcamImage');
            const gradcamOverlay = document.getElementById('gradcamOverlay');
            
            // Set result header
            if (randomType === 'normal') {
                resultHeader.classList.add('normal');
                resultStatus.textContent = '✅ ' + tumorData[randomType].name;
            } else {
                resultHeader.classList.remove('normal');
                resultStatus.textContent = '⚠️ ' + tumorData[randomType].name;
            }
            
            confidenceScore.textContent = `Confidence: ${confidence.toFixed(1)}%`;
            
            // Set explanation
            tumorType.textContent = tumorData[randomType].name;
            explanationText.textContent = tumorData[randomType].explanation;
            
            // Set Grad-CAM image (copy of uploaded image)
            gradcamImage.src = document.getElementById('uploadedImage').src;
            
            // Randomize Grad-CAM overlay position for tumor cases
            if (randomType !== 'normal') {
                const xPos = Math.random() * 60 + 20; // 20-80%
                const yPos = Math.random() * 60 + 20; // 20-80%
                const size = Math.random() * 20 + 15; // 15-35%
                gradcamOverlay.style.background = `radial-gradient(circle at ${xPos}% ${yPos}%, rgba(255, 0, 0, 0.7) ${size}%, transparent 40%)`;
            } else {
                gradcamOverlay.style.background = 'none';
            }
            
            // Update details
            document.getElementById('processingTime').textContent = (Math.random() * 2 + 2).toFixed(1) + 's';
            
            const qualities = ['Excellent', 'Very Good', 'Good'];
            document.getElementById('imageQuality').textContent = qualities[Math.floor(Math.random() * qualities.length)];
            
            const scanTypes = ['MRI T1', 'MRI T2', 'MRI FLAIR', 'MRI DWI'];
            document.getElementById('scanType').textContent = scanTypes[Math.floor(Math.random() * scanTypes.length)];
        }

        // Page switching
        function showPage(pageId) {
            document.getElementById(currentPage).style.display = 'none';
            document.getElementById(pageId).style.display = 'block';
            currentPage = pageId;
        }

        // Logout functionality
        function logout() {
            currentUser = null;
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
            showPage('loginPage');
        }
    </script>
<script>
function showPage(pageId) {
    // Hide all pages
    document.querySelectorAll(".page").forEach(page => {
        page.style.display = "none";
    });
    // Show the requested one
    document.getElementById(pageId).style.display = "block";
}

function goToPrediction() {
    showPage("predictionPage");
}

function goToReports() {
    showPage("reportsPage");
}

function goToDashboard() {
    showPage("dashboardPage");
}
</script>
<script>
function openReport(patientId, result, confidence, imageUrl) {
  document.getElementById("modalPatientId").innerText = patientId;
  document.getElementById("modalResult").innerText = result;
  document.getElementById("modalConfidence").innerText = confidence;
  document.getElementById("modalScanImage").src = imageUrl;

  document.getElementById("reportModal").style.display = "block";
}

function closeReport() {
  document.getElementById("reportModal").style.display = "none";
}
</script>
<script>
function openReport(patientId, patientName, result, confidence, imageUrl) {
  document.getElementById("modalPatientId").innerText = patientId;
  document.getElementById("modalPatientName").innerText = patientName; // NEW
  document.getElementById("modalResult").innerText = result;
  document.getElementById("modalConfidence").innerText = confidence;
  document.getElementById("modalScanImage").src = imageUrl;

  document.getElementById("reportModal").style.display = "block";
}
function closeReport() {
  document.getElementById("reportModal").style.display = "none";
}
</script>

</body>
</html>
